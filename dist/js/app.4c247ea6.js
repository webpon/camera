(function(){"use strict";var t={7647:function(t,o,n){var e=n(9242),i=n(3396);const r={class:"wrapper-2",ref:"wrapper"},a=["srcObject"],s=(0,i._)("button",{id:"playVideo"},"play video",-1),c={class:"action-group"};function u(t,o,n,e,u,h){return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("video",{crossOrigin:"anonymous",id:"localVideo",ref:"localVideoDOM",srcObject:u.stream,autoplay:"autoplay","object-fit":"contain"},null,8,a),s,(0,i._)("div",c,[(0,i._)("button",{id:"showPic",ref:"showPicDOM",onClick:o[0]||(o[0]=(...t)=>h.showPic&&h.showPic(...t))},null,512),(0,i._)("button",{id:"takePhoto",onClick:o[1]||(o[1]=(...t)=>h.takePhoto&&h.takePhoto(...t))}),(0,i._)("button",{id:"switchCamera",onClick:o[2]||(o[2]=(...t)=>h.switchCamera&&h.switchCamera(...t))},"switch")])],512)}n(541);var h=n(6816),l=n(2269),f=n.n(l),d={name:"App",data(){return{isFront:!0,stream:null,photoList:[]}},mounted(){this.getMedia(!0,(()=>{this.isFront=!0}),(function(t){console.log(t),alert("摄像头调用失败")}))},methods:{getMedia(t,o,n){navigator.mediaDevices.getUserMedia({video:{facingMode:t?"user":"environment"},audio:!1}).then((t=>{this.stream&&this.stream.getTracks().forEach((t=>{t.stop()})),this.stream=t,o&&o()})).catch((function(t){n&&n(t)}))},switchCamera(){this.getMedia(!this.isFront,(()=>{this.isFront=!this.isFront,console.log(this.isFront,"this.isFront")}),(function(t){console.log(t),alert("切换摄像头失败")}))},async takePhoto(){const t=this.$refs.localVideoDOM;this.$nextTick((async()=>{var o=await this.convertToImage(t);this.$refs.showPicDOM.setAttribute("style","background-image:url("+o+")"),this.photoList.unshift(o)}))},convertToImage(t){return f()(t).then((t=>t.toDataURL("image/jpg")))},showPic(){this.photoList.length&&(0,h.V)(this.photoList)}}},p=n(89);const v=(0,p.Z)(d,[["render",u]]);var g=v,m=n(3);n(5110);const w=(0,e.ri)(g);w.use(m.Ee),w.mount("#app")}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var r=o[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(o,e,i,r){if(!e){var a=1/0;for(h=0;h<t.length;h++){e=t[h][0],i=t[h][1],r=t[h][2];for(var s=!0,c=0;c<e.length;c++)(!1&r||a>=r)&&Object.keys(n.O).every((function(t){return n.O[t](e[c])}))?e.splice(c--,1):(s=!1,r<a&&(a=r));if(s){t.splice(h--,1);var u=i();void 0!==u&&(o=u)}}return o}r=r||0;for(var h=t.length;h>0&&t[h-1][2]>r;h--)t[h]=t[h-1];t[h]=[e,i,r]}}(),function(){n.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(o,{a:o}),o}}(),function(){n.d=function(t,o){for(var e in o)n.o(o,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){var t={143:0};n.O.j=function(o){return 0===t[o]};var o=function(o,e){var i,r,a=e[0],s=e[1],c=e[2],u=0;if(a.some((function(o){return 0!==t[o]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(c)var h=c(n)}for(o&&o(e);u<a.length;u++)r=a[u],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(h)},e=self["webpackChunkcamera"]=self["webpackChunkcamera"]||[];e.forEach(o.bind(null,0)),e.push=o.bind(null,e.push.bind(e))}();var e=n.O(void 0,[998],(function(){return n(7647)}));e=n.O(e)})();
//# sourceMappingURL=app.4c247ea6.js.map